<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fun.trip2.blog.dao.BlogDao">

    <resultMap type="fun.trip2.blog.entity.Blog" id="BlogMap">
        <result property="blogId" column="blog_id" jdbcType="INTEGER"/>
        <result property="blogTitle" column="blog_title" jdbcType="VARCHAR"/>
        <result property="blogSubUrl" column="blog_sub_url" jdbcType="VARCHAR"/>
        <result property="blogCoverImage" column="blog_cover_image" jdbcType="VARCHAR"/>
        <result property="blogContent" column="blog_content" jdbcType="VARCHAR"/>
        <result property="blogCatId" column="blog_cat_id" jdbcType="INTEGER"/>
        <result property="blogCategoryName" column="blog_category_name" jdbcType="VARCHAR"/>
        <result property="blogTags" column="blog_tags" jdbcType="VARCHAR"/>
        <result property="blogStatus" column="blog_status" jdbcType="VARCHAR"/>
        <result property="blogViews" column="blog_views" jdbcType="OTHER"/>
        <result property="enableComment" column="enable_comment" jdbcType="VARCHAR"/>
        <result property="deleteFlag" column="delete_flag" jdbcType="VARCHAR"/>
        <result property="createDate" column="create_date" jdbcType="TIMESTAMP"/>
        <result property="amendDate" column="amend_date" jdbcType="TIMESTAMP"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="BlogMap">
        select
          blog_id, blog_title, blog_sub_url, blog_cover_image, blog_content, blog_cat_id, blog_category_name, blog_tags, blog_status, blog_views, enable_comment, delete_flag, create_date, amend_date
        from blog.tbl_blog
        where blog_id = #{blogId}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="BlogMap">
        select
          blog_id, blog_title, blog_sub_url, blog_cover_image, blog_content, blog_cat_id, blog_category_name, blog_tags, blog_status, blog_views, enable_comment, delete_flag, create_date, amend_date
        from blog.tbl_blog
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="BlogMap">
        select
          blog_id, blog_title, blog_sub_url, blog_cover_image, blog_content, blog_cat_id, blog_category_name, blog_tags, blog_status, blog_views, enable_comment, delete_flag, create_date, amend_date
        from blog.tbl_blog
        <where>
            <if test="blogId != null">
                and blog_id = #{blogId}
            </if>
            <if test="blogTitle != null and blogTitle != ''">
                and blog_title = #{blogTitle}
            </if>
            <if test="blogSubUrl != null and blogSubUrl != ''">
                and blog_sub_url = #{blogSubUrl}
            </if>
            <if test="blogCoverImage != null and blogCoverImage != ''">
                and blog_cover_image = #{blogCoverImage}
            </if>
            <if test="blogContent != null and blogContent != ''">
                and blog_content = #{blogContent}
            </if>
            <if test="blogCatId != null">
                and blog_cat_id = #{blogCatId}
            </if>
            <if test="blogCategoryName != null and blogCategoryName != ''">
                and blog_category_name = #{blogCategoryName}
            </if>
            <if test="blogTags != null and blogTags != ''">
                and blog_tags = #{blogTags}
            </if>
            <if test="blogStatus != null and blogStatus != ''">
                and blog_status = #{blogStatus}
            </if>
            <if test="blogViews != null">
                and blog_views = #{blogViews}
            </if>
            <if test="enableComment != null and enableComment != ''">
                and enable_comment = #{enableComment}
            </if>
            <if test="deleteFlag != null and deleteFlag != ''">
                and delete_flag = #{deleteFlag}
            </if>
            <if test="createDate != null">
                and create_date = #{createDate}
            </if>
            <if test="amendDate != null">
                and amend_date = #{amendDate}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="blogId" useGeneratedKeys="true">
        insert into blog.tbl_blog(blog_title, blog_sub_url, blog_cover_image, blog_content, blog_cat_id, blog_category_name, blog_tags, blog_status, blog_views, enable_comment, delete_flag, create_date, amend_date)
        values (#{blogTitle}, #{blogSubUrl}, #{blogCoverImage}, #{blogContent}, #{blogCatId}, #{blogCategoryName}, #{blogTags}, #{blogStatus}, #{blogViews}, #{enableComment}, #{deleteFlag}, #{createDate}, #{amendDate})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update blog.tbl_blog
        <set>
            <if test="blogTitle != null and blogTitle != ''">
                blog_title = #{blogTitle},
            </if>
            <if test="blogSubUrl != null and blogSubUrl != ''">
                blog_sub_url = #{blogSubUrl},
            </if>
            <if test="blogCoverImage != null and blogCoverImage != ''">
                blog_cover_image = #{blogCoverImage},
            </if>
            <if test="blogContent != null and blogContent != ''">
                blog_content = #{blogContent},
            </if>
            <if test="blogCatId != null">
                blog_cat_id = #{blogCatId},
            </if>
            <if test="blogCategoryName != null and blogCategoryName != ''">
                blog_category_name = #{blogCategoryName},
            </if>
            <if test="blogTags != null and blogTags != ''">
                blog_tags = #{blogTags},
            </if>
            <if test="blogStatus != null and blogStatus != ''">
                blog_status = #{blogStatus},
            </if>
            <if test="blogViews != null">
                blog_views = #{blogViews},
            </if>
            <if test="enableComment != null and enableComment != ''">
                enable_comment = #{enableComment},
            </if>
            <if test="deleteFlag != null and deleteFlag != ''">
                delete_flag = #{deleteFlag},
            </if>
            <if test="createDate != null">
                create_date = #{createDate},
            </if>
            <if test="amendDate != null">
                amend_date = #{amendDate},
            </if>
        </set>
        where blog_id = #{blogId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from blog.tbl_blog where blog_id = #{blogId}
    </delete>

</mapper>